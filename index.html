<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>Media Canvas</title>
  <script src="./src/MediaCanvas.js"></script>
	<script src="./src/PresetPasses.js"></script>
</head>

<body>
  <!-- Then manipulate image data and present it here! -->
  <canvas class="render"></canvas>

	<script>

		var MC = new MediaCanvas(document.body.querySelector('.render'));
		MC.setSize(550, 550);
		var scale = new PresetPasses.Scale(550, 550)
		MC.addPass(0, scale);
		var blur = new PresetPasses.blurStackBox(100);
		MC.addPass('blur', blur);

		function blurKill(){
			blur.radius -= 5;
			if (blur.radius > 0) {
				this.setTimeout(blurKill);
			} else {
				MC.removePass('blur');
			}
			MC.render(src);
		}

		var img = new Image();
		var src = img;

		src.onload = function() {
			MC.render(src);

			// Get dat mega pic!
			src.onload = function() {
				blurKill();
			};
			src.src = './jake.png';
		}

		src.src = './jake_tiny.png';



		// var video = document.createElement('video');
		// video.autoplay = true;
		// video.loop = true;
		//
		// var src = video;
		// src.src = './light-face.webm';
		//
		// document.body.appendChild(video);
		// video.play();
		// video.style.display = 'none';
		//
		// MC.setSize(440, 248);
		//
		// (function render() {
		//
		// 	window.requestAnimationFrame(render);
		// 	MC.render(src);
		//
		// })();

	</script>

</body>
</html>
